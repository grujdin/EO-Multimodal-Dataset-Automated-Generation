# EMDAT-GDIS Semantic Connector Pipeline

The **EMDAT-GDIS Semantic Connector** provides a structured workflow to transform, harmonize, visualize, and semantically annotate disaster event data from the EM-DAT public database. Each step aligns this data with GDIS spatial units and GAUL administrative boundaries, creating a semantic graph suitable for advanced analysis, visualization, and machine-readable query execution.

## EMDAT Data Processing Pipeline

The following table summarizes all processing operations applied to the raw EM-DAT data, from initial reduction through RDF conversion. Each step reads one or more source files and produces new outputs ready for the next stage.

| Processing Operation | Description | Source File(s) | Destination File(s) | Script Name / API | Remarks |
|:--------------------|:------------|:----------------|:---------------------|:------------------|:--------|
| **REDUCE EM-DAT PUBLIC TABLE** | Extract required columns to reduce file size and retain relevant metadata | `<home_directory>/emdat_gdis_semantic_connector/<wbr/>Data/public_emdat_custom_request_2024-05-12_85ae59a7.xlsx` | `<home_directory>/emdat_gdis_semantic_connector/<wbr/>Data/public_emdat_reduced.xlsx` | `<home_directory>/emdat_gdis_semantic_connector/reduce_emdat.py` | Retains EM-DAT metadata (hazard, time, location, identifiers, coordinates, admin units) |
| **SPLIT INTO OBSERVATIONS & ALIGN TO GDIS** | Split multi-location records, normalize names, and assign unique `MMR-xxx` codes | `<home_directory>/emdat_gdis_semantic_connector/Data/public_emdat_reduced.xlsx` | `<home_directory>/emdat_gdis_semantic_connector/Data/public_emdat_gdis_aligned.xlsx` | `<home_directory>/emdat_gdis_semantic_connector/emdat2gdis.py` | Includes fuzzy matching logic and expansion of regional naming structures |
| **EXTRACT GAUL GEOMETRIES** | Retrieve and trim GAUL XML geometries (ADM1/ADM2) corresponding to event locations | <ul><li>`<home_directory>/emdat_gdis_semantic_connector/Data/public_emdat_gdis_aligned.xlsx`</li><li>`<home_directory>/emdat_gdis_semantic_connector/Data/g2015_2014_1.xml`</li><li>`<home_directory>/emdat_gdis_semantic_connector/Data/g2015_2014_2.xml`</li></ul> | <ul><li>`<home_directory>/emdat_gdis_semantic_connector/Data/g2015_2014_1_geom_extract.xml`</li><li>`<home_directory>/emdat_gdis_semantic_connector/Data/g2015_2014_2_geom_extract.xml`</li><li>`<home_directory>/emdat_gdis_semantic_connector/Data/public_emdat_gdis_gaul_aligned.xlsx`</li></ul> | `<home_directory>/emdat_gdis_semantic_connector/emdat_gdis2gaul.py` | Selectively extracts only the referenced GAUL features for further analysis |
| **ASSIGN GAUL FIDs TO OBSERVATIONS** | Map observations to GAUL geometries by FID and update event records | <ul><li>`<home_directory>/emdat_gdis_semantic_connector/Data/g2015_2014_1_geom_extract.xml`</li><li>`<home_directory>/emdat_gdis_semantic_connector/Data/g2015_2014_2_geom_extract.xml`</li><li>`<home_directory>/emdat_gdis_semantic_connector/Data/public_emdat_gdis_gaul_aligned.xlsx`</li></ul> | `<home_directory>/emdat_gdis_semantic_connector/Data/public_emdat_gdis_gaul_fids.xlsx` | `<home_directory>/emdat_gdis_semantic_connector/emdat_gdis_gaul_fids.py` | Adds administrative geometry identifiers (FID_1/FID_2) for spatial linkage |
| **EXTRACT & DISPLAY ADMIN COMPOSITE IMAGES** | Build high-resolution composite maps for ADM0 → ADM1 and ADM1 → ADM2 groupings | <ul><li>`<home_directory>/emdat_gdis_semantic_connector/Data/g2015_2014_1.xml`</li><li>`<home_directory>/emdat_gdis_semantic_connector/Data/g2015_2014_2.xml`</li></ul> | <ul><li>`<home_directory>/emdat_gdis_semantic_connector/Data/adm0_composite_maps/*.png`</li><li>`<home_directory>/emdat_gdis_semantic_connector/Data/adm1_composite_maps/*.png`</li><li>`<home_directory>/emdat_gdis_semantic_connector/Data/adm2_maps/*.png`</li></ul> | <ul><li>`<home_directory>/emdat_gdis_semantic_connector/adm0_composite_map.py`</li><li>`<home_directory>/emdat_gdis_semantic_connector/adm1_composite_map.py`</li><li>`<home_directory>/emdat_gdis_semantic_connector/adm2_map.py`</li></ul> | Color-coded polygons with adjacency-aware coloring and centroid labels per unit |
| **CREATE FULL HAZARD TAXONOMY** | Build hierarchical hazard taxonomy in OWL-TTL format from classification mapping | `<home_directory>/emdat_gdis_semantic_connector/Data/classification_mapping.csv` | `<home_directory>/emdat_gdis_semantic_connector/Data/emdat_hazard_taxonomy.ttl` | `<home_directory>/emdat_gdis_semantic_connector/build_emdat_hazard_taxonomy.py` | Includes relationships to sensors and ML-relevant objectives using `isMonitoredBy`, `hasRelatedObjective` |
| **CONVERT DISASTER DATA INTO RDF** | Generate RDF triples for all observations and their related events | <ul><li>`<home_directory>/emdat_gdis_semantic_connector/Data/public_emdat_gdis_gaul_fids.xlsx`</li><li>`<home_directory>/emdat_gdis_semantic_connector/Data/classification_mapping.csv`</li></ul> | `<home_directory>/emdat_gdis_semantic_connector/Data/emdat_gdis_gaul_observations.ttl` | `<home_directory>/emdat_gdis_semantic_connector/observations2rdf_triples.py` | Emits complete RDF graphs with GeoSPARQL, OWL-Time, and hazard ontology alignment |
| **FEED THE DATA INTO LOCAL GRAPHDB** | Load all RDF graphs into local triple store | <ul><li>`<home_directory>/emdat_gdis_semantic_connector/data/eomdg_ontology.ttl`</li><li>`<home_directory>/emdat_gdis_semantic_connector/data/emdat_hazard_taxonomy.ttl`</li><li>`<home_directory>/emdat_gdis_semantic_connector/data/emdat_gdis_gaul_observations.ttl`</li></ul> | SPARQL endpoint: `http://localhost:7200/repositories/eo_nh_kg` | `<home_directory>/emdat_gdis_semantic_connector/TBD.py` | Recommended load order: ontology → taxonomy → data instance triples |

---

This pipeline enables spatially and semantically rich analysis of natural disasters using linked data principles, with alignment across EM-DAT metadata, GDIS location descriptors, and GAUL administrative boundaries. It is optimized for high-resolution mapping, ontology-enhanced AI pipelines, and federated SPARQL queries.
