# EMDAT-GDIS Semantic Connector Pipeline

The **EMDAT-GDIS Semantic Connector** provides a structured workflow to integrate, align, visualize, and semantically enrich disaster event data from the EM-DAT database, ensuring compatibility with the GDIS and GAUL standards. The pipeline facilitates semantic querying and visualization through RDF and ontological structures, enabling advanced analyses and applications in disaster risk management.

## Pipeline Overview

Below is a detailed description of each processing step, with corresponding scripts, source files, and outputs:

| Processing Operation                         | Description                                                                                                                         | Source File(s)                                                                                                                                                                                                                                                              | Destination File(s)                                                                                                                                                                                                                                                         | Script Name / API                                                        | Remarks                                                                                                                                                                                                                                                                                                                                  |
| :------------------------------------------- | :---------------------------------------------------------------------------------------------------------------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :----------------------------------------------------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **REDUCE EM-DAT PUBLIC TABLE**               | Extract essential columns needed for analysis, significantly reducing the dataset's size                                            | `<home_directory>/emdat_gdis_semantic_connector/Data/</br>public_emdat_custom_request_2024-05-12_85ae59a7-afa1-41e3-8642-596f53c2731a.xlsx`                                                                                                                                      | `<home_directory>/emdat_gdis_semantic_connector/Data/public_emdat_reduced.xlsx`                                                                                                                                                                                             | `reduce_emdat.py`                                                        | Retained columns:<br/>`DisNo., Classification Key, External IDs, Event Name, ISO, Country, Subregion, Region, Location, Origin, Associated Types, Latitude, Longitude, River Basin, Start Year, Start Month, Start Day, End Year, End Month, End Day, Admin Units (adm1_code, adm1_name, adm2_code, adm2_name), Entry Date, Last Update` |
| **SPLIT INTO OBSERVATIONS & ALIGN TO GDIS**  | Transform multi-location events into separate observations, normalize location names, and assign unique observation IDs (`MMR-xxx`) | `<home_directory>/emdat_gdis_semantic_connector/Data/public_emdat_reduced.xlsx`                                                                                                                                                                                             | `<home_directory>/emdat_gdis_semantic_connector/Data/public_emdat_gdis_aligned.xlsx`                                                                                                                                                                                        | `emdat2gdis.py`                                                          | Handles spell normalization and creates standardized IDs for observations linked via `DisNo.`                                                                                                                                                                                                                                            |
| **EXTRACT GAUL GEOMETRIES**                  | Match and retrieve GAUL ADM1 and ADM2 geometries from original GAUL XML files, aligning them with the GDIS observations             | `<home_directory>/emdat_gdis_semantic_connector/Data/public_emdat_gdis_aligned.xlsx`,<br/>`<home_directory>/emdat_gdis_semantic_connector/Data/g2015_2014_1.xml`, </br> `<home_directory>/emdat_gdis_semantic_connector/Data/g2015_2014_2.xml`                              | `<home_directory>/emdat_gdis_semantic_connector/Data/g2015_2014_1_geom_extract.xml`,<br/>`<home_directory>/emdat_gdis_semantic_connector/Data/g2015_2014_2_geom_extract.xml`,<br/>`<home_directory>/emdat_gdis_semantic_connector/Data/public_emdat_gdis_gaul_aligned.xlsx` | `emdat_gdis2gaul.py`                                                     | Generates XML files per GAUL administrative level and a combined Excel file with geometry references                                                                                                                                                                                                                                     |
| **ASSIGN GAUL FIDs TO OBSERVATIONS**         | Map GAUL administrative feature identifiers (FID\_1, FID\_2) to each observation                                                    | `<home_directory>/emdat_gdis_semantic_connector/Data/g2015_2014_1_geom_extract.xml`,<br/>`<home_directory>/emdat_gdis_semantic_connector/Data/g2015_2014_2_geom_extract.xml`,<br/>`<home_directory>/emdat_gdis_semantic_connector/Data/public_emdat_gdis_gaul_aligned.xlsx` | `<home_directory>/emdat_gdis_semantic_connector/Data/public_emdat_gdis_gaul_fids.xlsx`                                                                                                                                                                                      | `emdat_gdis_gaul_fids.py`                                                | Adds the columns: `Unique Code, FID_1, adm1_code, adm1_name, FID_2, adm2_code, adm2_name`                                                                                                                                                                                                                                                |
| **EXTRACT & DISPLAY ADMIN COMPOSITE IMAGES** | Produce detailed visualization maps for each administrative level (ADM0, ADM1, ADM2) using GAUL geometry data                       | `<home_directory>/emdat_gdis_semantic_connector/Data/g2015_2014_1.xml`, `<home_directory>/emdat_gdis_semantic_connector/Data/g2015_2014_2.xml`                                                                                                                              | `<home_directory>/emdat_gdis_semantic_connector/Data/adm0_composite_maps/*.png`,<br/>`<home_directory>/emdat_gdis_semantic_connector/Data/adm1_composite_maps/*.png`,<br/>`<home_directory>/emdat_gdis_semantic_connector/Data/adm2_maps/*.png`                             | `adm0_composite_map.py`,<br/>`adm1_composite_map.py`,<br/>`adm2_maps.py` | Generates visual QA maps for administrative unit validation                                                                                                                                                                                                                                                                              |
| **CREATE FULL HAZARD TAXONOMY**              | Generate a semantic taxonomy of hazards aligning with EM-DAT classifications, including associated sensors and ML objectives        | `<home_directory>/emdat_gdis_semantic_connector/Data/classification_mapping.csv`                                                                                                                                                                                            | `<home_directory>/emdat_gdis_semantic_connector/Data/emdat_hazard_taxonomy.ttl`                                                                                                                                                                                             | `build_emdat_hazard_taxonomy.py`                                         | Constructs an OWL ontology hierarchy with hazard categories, subclasses, and associated monitoring technologies and objectives                                                                                                                                                                                                           |
| **CONVERT DISASTER DATA INTO RDF**           | Convert structured Excel data into comprehensive RDF triples compatible with GraphDB                                                | `<home_directory>/emdat_gdis_semantic_connector/Data/public_emdat_gdis_gaul_fids.xlsx`,<br/>`<home_directory>/emdat_gdis_semantic_connector/Data/classification_mapping.csv`                                                                                                | `<home_directory>/emdat_gdis_semantic_connector/Data/emdat_gdis_gaul_observations.ttl`                                                                                                                                                                                      | `observations2rdf_triples.py`                                            | Includes semantic relations for events and observations: temporal, spatial, administrative units, QA metadata, and hazard classification                                                                                                                                                                                                 |
| **FEED DATA INTO LOCAL GRAPHDB**             | Import the RDF triples along with the EOMDG ontology and Hazard Taxonomy into GraphDB                                               | `<home_directory>/emdat_gdis_semantic_connector/data/eomdg_ontology.ttl`,<br/>`<home_directory>/emdat_gdis_semantic_connector/data/emdat_hazard_taxonomy.ttl`, <br/>`<home_directory>/emdat_gdis_semantic_connector/data/emdat_gdis_gaul_observations.ttl`                  | SPARQL endpoint at `http://localhost:7200/repositories/eo_nh_kg`                                                                                                                                                                                                            | Script TBD (`TBD.py`)                                                    | Recommended loading order: 1) EOMDG Ontology, 2) Hazard Taxonomy, 3) Observation Data                                                                                                                                                                                                                                                    |

---

## Further Recommendations

* Implement automated workflow orchestration for seamless pipeline execution.
* Regularly validate and refine RDF and ontology structures to maintain data integrity.
* Enhance visualization outputs to facilitate intuitive data exploration.
